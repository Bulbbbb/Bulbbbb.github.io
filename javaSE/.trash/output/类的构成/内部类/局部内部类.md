---
aliases: 
tags: 
---
_定义在方法中的类叫做局部内部类。_

```java
class Outer{
	class Inner{
		。。。
	}
}
```

+ _成员内部类不能使用修饰符，就像方法中的变量也不能使用一样。因为其作用域只在方法内。_

## 成员内部类的构成

+ _局部内部类和成员内部类相同，可以包含各种成分，static 成员只能使用 static final 修饰。_

## 成员内部类的实例化

+ _成员内部类的作用范围为该方法，只能在方法内进行访问。_

```java
InnerSub innerSub = new InnerSub();
```

## 和外部类的相互访问

+ _局部内部类可以访问外部类的所有属性和方法。_
+ _局部内部类可以访问方法内的局部变量，但是该变量需要使用 final 进行修饰。_
+ _成员内部类的范围是在方法内，因此外部类要想访问局部内部类也只能在方法内。_

> [!note] _当局部内部类访问方法的局部变量时，局部变量必须为 final。_
> _局部变量会在方法结束时释放，而在方法内创建的局部内部类的对象却不会释放掉。如果局部内部类访问了局部变量，最后可能会造成局部内部类访问一个不存在的变量。_
> _因此，Java 通过将局部变量复制一份传到局部内部类中，这就，在局部变量释放后，局部内部类对象还维护者这份“复制品”。_
> _此时又会出现一个尴尬现象，如果在第二次访问该方法的时候，局部变量的值被修改了，那局部内部类内维持的“复制品”就无效了，因此局部变量必须定义为 final 来防止局部变量被修改。_

## question

> [!question]- _局部内部类和匿名内部类访问局部变量的时候，为什么变量必须要加上 final？_
