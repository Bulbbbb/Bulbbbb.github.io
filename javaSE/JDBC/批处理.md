---
aliases: 
tags: 
---
*[JDBC 批处理](https://www.w3cschool.cn/jdbc/jdbc-batch-processing.html)*

*批处理就是一次执行多条语句。*

*通过 addBatch() 方法添加多条语句，然后通过 executeBatch() 执行。*

*executeBatch() 返回一个整数数组，代表每条语句在数据库中更新的语句数。*

*clearBatch() 用于清除加入的语句。*

### 使用 Statement 进行批处理

```java
Statement stmt = conn.createStatement();
conn.setAutoCommit(false);

String SQL = "INSERT INTO Employees VALUES(2,"name")";
stmt.addBatch(SQL);
SQL = "INSERT INTO Employees VALUES(2,"new name")";
stmt.addBatch(SQL);
SQL = "UPDATE Employees SET age = 5 WHERE id = 1";
stmt.addBatch(SQL);
int[] count = stmt.executeBatch();
conn.commit();
```

### 使用 PrepareStatement 进行批处理

```java
String SQL = "INSERT INTO Employees (id, firstName)VALUES(?, ?)";
PreparedStatemen pstmt = conn.prepareStatement(SQL);

//Set auto-commit to false
conn.setAutoCommit(false);

// Set the variables
pstmt.setInt( 1, 101 );
pstmt.setString( 2, "name" );
// Add it to the batch
pstmt.addBatch();

// Set the variables
pstmt.setInt( 1, 102 );
pstmt.setString( 2, "new name" );
// Add it to the batch
pstmt.addBatch();

//add more batches
//...
//Create an int[] to hold returned values
int[] count = stmt.executeBatch();

//Explicitly commit statements to apply changes
conn.commit();
```